#!name=MGTV (WeiGiegie)
#!desc=芒果TV：VIP/去广告（加载远程脚本版本）
#!author=WeiGiegie (Loon wrapper by ChatGPT)
#!homepage=https://github.com/WeiGiegie/666
#!icon=https://raw.githubusercontent.com/WeiGiegie/666/main/icon.png

[Script]
# 1) script-response-body => Loon 用 http-response + requires-body=true
http-response ^https?:\/\/.*mgtv\.com.*(GetUserInfo|module\/list\?_support|app\/bdboot|pullReleaseInfo|floor\/detail|video\/source|entry\?_support).*$ script-path=https://raw.githubusercontent.com/WeiGiegie/666/main/mgtv.js,requires-body=true,timeout=30

# 2) script-request-header => Loon 用 http-request（改请求头不需要 body）
http-request ^https?:\/\/mobile-stream\.api\.mgtv\.com\/v1\/video\/source\? script-path=https://raw.githubusercontent.com/WeiGiegie/666/main/mgtk.js,timeout=30

[Rule]
# 3) reject => Loon 用 REJECT
URL-REGEX,^https?:\/\/mobile\.da\.mgtv\.com\/m\/page,REJECT

[MITM]
hostname = *.mgtv.com, *.imgo.tv
